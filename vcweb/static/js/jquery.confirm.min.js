jQuery.fn.confirm=function(a){a=jQuery.extend({msg:"Are you sure?",stopAfter:"never",wrapper:"<span></span>",eventType:"click",dialogShow:"show",dialogSpeed:"",timeout:0},a);a.stopAfter=a.stopAfter.toLowerCase();if(!a.stopAfter in ["never","once","ok","cancel"]){a.stopAfter="never"}a.buttons=jQuery.extend({ok:"Yes",cancel:"No",wrapper:'<a href="#"></a>',separator:"/"},a.buttons);var b=a.eventType;return this.each(function(){var h=this;var d=jQuery(h);var j;var c=function(){var l=jQuery.data(h,"events");if(!l&&h.href){d.bind("click",function(){document.location=h.href});l=jQuery.data(h,"events")}else{if(!l){return}}h._handlers=new Array();for(var k in l[b]){h._handlers.push(l[b][k])}};var e=jQuery(a.buttons.wrapper).append(a.buttons.ok).click(function(){if(a.timeout!=0){clearTimeout(j)}d.unbind(b,f);d.show();g.hide();if(h._handlers!=undefined){jQuery.each(h._handlers,function(){d.click(this.handler)})}d.click();if(a.stopAfter!="ok"&&a.stopAfter!="once"){d.unbind(b);d.one(b,f)}return false});var i=jQuery(a.buttons.wrapper).append(a.buttons.cancel).click(function(){if(a.timeout!=0){clearTimeout(j)}if(a.stopAfter!="cancel"&&a.stopAfter!="once"){d.one(b,f)}d.show();g.hide();return false});if(a.buttons.cls){e.addClass(a.buttons.cls);i.addClass(a.buttons.cls)}var g=jQuery(a.wrapper).append(a.msg).append(e).append(a.buttons.separator).append(i);var f=function(){jQuery(this).hide();if(a.dialogShow!="show"){g.hide()}g.insertBefore(this);g[a.dialogShow](a.dialogSpeed);if(a.timeout!=0){clearTimeout(j);j=setTimeout(function(){i.click();d.one(b,f)},a.timeout)}return false};c();d.unbind(b);h._confirm=f;h._confirmEvent=b;d.one(b,f)})};