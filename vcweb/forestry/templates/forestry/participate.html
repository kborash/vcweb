{% extends "base-participant.html" %}
{% block head %}
{{ block.super }}

<script type="text/javascript">
$(function() {
        $("#forestryForm").validate({ 
                rules: {
                    harvest_decision: {
                        required: true,
                        range: [0, {{max_harvest_decision}}]
                    }
                },
                messages: {
                    harvest_decision: {
                        required: "Please enter a harvest decision",
                        range: "Please enter a number between 0 and {{ max_harvest_decision }}"
                    }
                },
        });
        $('#harvestDecisionId').focus(function() {
            this.select();
        });
        $('#harvestDecisionId').focus();
});
</script>
{% endblock %}
{% block title %}
Participating in {{experiment.status_line}}
{% endblock %}

{% block content %}
<h3>Forestry round number {{ experiment.current_round.round_number }}</h3>
<div class='forestry-resource'>
    {% comment %}
    FIXME: naive way to show 10 trees.  Do image manip on the server side or enerate
    10-trees, 9-trees, 8-trees, etc., files?
    {% endcomment %}
    {% for i in num_display_trees %}
    <img src='/static/images/forestry/pine-tree.jpg' alt='Each tree image corresponds to ten trees in your forest.' />
    {% endfor %}
</div>
<div class='ui-state-highlight ui-corner-all'>
    <span class='ui-icon ui-icon-info'></span>
    The resource size is <b>{{ resource_level.value }}</b>. 

</div>
{% if max_harvest_decision > 0 %}
<form id='forestryForm' action='' method='post'>
    <div class='field'>
        <label for='harvestDecisionId'>How many trees will you harvest this round? <br/><small>(<b>Choose a number between 0 and {{ max_harvest_decision }})</small></b>:</label>
        <input id='harvestDecisionId' type="text" name='harvest_decision' class='required digits upToTwoDigits' />
    </div>
    <div class='field'>
        <input type='submit' value='Submit' />
    </div>
</form>
{% else %}
<div class='ui-state-highlight ui-corner-all'>
    <span class='ui-icon ui-icon-alert'></span>
    The resource has been depleted to the point where no one can harvest from
    it.
</div>
{% endif %}
{% endblock content %}
